<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>thethings.iO API -  App Development Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;ruby&quot;,&quot;python&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/theThings/thethings.iO-arduino-library'>Arduino library</a></br></li>
            <li><a href='https://github.com/theThings/thethings.iO-python-library'>Python library</a></br></li>
            <li><a href='https://github.com/theThings/thethings.iO-TexasInstruments-library'>Texas Instruments library</a></br></br> <a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="app-development">App Development</h1>

<h2 id="developing-iot-apps-with-thethings-io">Developing IoT Apps with thethings.iO</h2>

<p>This document is a guide to understand how to create apps on top of Internet of Things using thethings.iO. It&rsquo;s recommendable to read the <a href="https://developers.thethings.io/index.html">Quickstart guide</a> first to, at least, create an account and activate a thing. </p>

<h2 id="getting-started">Getting started</h2>

<p>Apps are intended to use the HTTP API REST to work with thethings.iO Platform.</p>

<h3 id="postman-collection">Postman Collection</h3>

<p>You can test the following examples importing this postman collection: <a href="https://www.getpostman.com/collections/56301cc95ee8e643f9e5">thethings.iO APP Dev Postman Collection</a></p>

<p>Get Postman: <a href="http://www.getpostman.com/">Postman REST Client</a>.</p>

<h3 id="things-and-resources">Things and Resources</h3>

<p>The <strong>Things</strong> are the virtual representations of your Internet-connected devices.</p>

<p>We can see a <strong>Thing</strong> connected to the Internet as a <strong>collection</strong> of Resources. And each <strong>Resource</strong> can be seen as a <strong>timeline</strong>.</p>

<p>The thing is going to publish or consume this resources. For example, a thing with a temperature sensor is going to publish temperature and a thing that is an on-off switch is going to consume a resource called turn which can take values on or off.</p>

<p><strong>Everything can be a resource</strong>
The value of a resource has not only to be a string or a number it can be an array, a json object or even a binary.</p>

<h2 id="making-an-iot-app">Making an IoT App</h2>

<p>Once you understand the concepts of Thing and Resource, you can start to analyze the requirements of your application.</p>

<p>You must choose a set of resources (it is possible to edit them later) that your app will be using. The possibilities are limitless. For example, you can choose temperature and humidity. Another option would be to choose steps and calories, so the application will be compatible with all the things publishing steps and/or calories (Fitbit, nikeplus,&hellip;) connected to the platform. Or maybe an application to control the energy consumption of a home using the resource power-consumption.</p>

<p>You can register an app from the <a href="https://panel.thethings.io/">Panel</a>. Once registered you will <strong>get an appID to identify your app.</strong></p>

<p>At the same Panel you have to configure which resources will ask your APP for. <strong>This resources must match with the public resources defined on your product.</strong> Product resources remain private and unnaccesible by the APPs until you explicitly define them as public. You can follow the instructions at this page (Create a new IoT Product and Create a new IoT App sections): <a href="https://developers.thethings.io/iot-panel.html">Premium Panel</a>.</p>

<h3 id="setup">Setup</h3>

<p>The first thing you need to do is to send the username, password and appID to register the user, then log the user in so you can get a <strong>session token.</strong></p>

<p>This <strong>session token</strong> is necessary to be sent in the header Authorization in every call to the platform from now on. And will let thethings.iO to identify the user and the application. This session token also contains the list of things and resources the user has authorized the app to access.</p>

<h2 id="register">Register</h2>
<pre class="highlight shell"><code>
<span class="c"># Curl</span>
curl -i -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{"email": "YOUR EMAIL HERE", "password": "a hard to guess password", "app": "The appID given in the panel"}'</span> <span class="se">\</span>
  -X POST <span class="s2">"https://api.thethings.io/v2/register"</span> -k

</code></pre>

<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"token"</span>: <span class="s2">"5w3iea4uCCNPkLNkm6R6OpyOPXo"</span>,
  <span class="s2">"expirationDate"</span>: 31536000, //seconds till token expiration
  <span class="s2">"roles"</span>: <span class="o">{</span>
    <span class="s2">"RSRC_description"</span>: <span class="o">{</span>
      <span class="s2">"OTLoG_xxxxxxxx"</span>: <span class="o">{</span>
        <span class="s2">"get"</span>: <span class="nb">true</span>,
        <span class="s2">"post"</span>: <span class="nb">true</span>,
        <span class="s2">"grant"</span>: <span class="nb">true</span>,
        <span class="s2">"put"</span>: <span class="nb">true</span>,
        <span class="s2">"delete"</span>: <span class="nb">true</span>
      <span class="o">}</span>
    <span class="o">}</span>,
    <span class="s2">"RSRC_temperature"</span>: <span class="o">{</span>
      <span class="s2">"OTLoG_xxxxxxxx"</span>: <span class="o">{</span>
        <span class="s2">"get"</span>: <span class="nb">true</span>,
        <span class="s2">"post"</span>: <span class="nb">true</span>,
        <span class="s2">"grant"</span>: <span class="nb">true</span>,
        <span class="s2">"put"</span>: <span class="nb">true</span>,
        <span class="s2">"delete"</span>: <span class="nb">true</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="s2">"status"</span>: <span class="s2">"success"</span>,
  <span class="s2">"message"</span>: <span class="s2">"user created"</span>
<span class="o">}</span>

</code></pre>

<p>Register an App user at thethings.iO Platform. This endpoint also login the user (returns the session token and roles), so you don&rsquo;t have to do another api call to login him.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST   https://api.thethings.io/v2/register</code></p>

<h2 id="login">Login</h2>
<pre class="highlight shell"><code>url -i -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{"email": "YOUR EMAIL HERE", "password": "a hard to guess password", "app": "The appID given in the panel"}'</span> <span class="se">\</span>
  -X POST <span class="s2">"https://api.thethings.io/v2/login"</span> -k
</code></pre>

<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"token"</span>: <span class="s2">"5w3iea4uCCNPkLNkm6R6OpyOPXo"</span>,
  <span class="s2">"expirationDate"</span>: 31536000, //seconds till token expiration
  <span class="s2">"roles"</span>: <span class="o">{</span>
    <span class="s2">"RSRC_description"</span>: <span class="o">{</span>
      <span class="s2">"OTLoG_xxxxxxxx"</span>: <span class="o">{</span>
        <span class="s2">"get"</span>: <span class="nb">true</span>,
        <span class="s2">"post"</span>: <span class="nb">true</span>,
        <span class="s2">"grant"</span>: <span class="nb">true</span>,
        <span class="s2">"put"</span>: <span class="nb">true</span>,
        <span class="s2">"delete"</span>: <span class="nb">true</span>
      <span class="o">}</span>
    <span class="o">}</span>,
    <span class="s2">"RSRC_temperature"</span>: <span class="o">{</span>
      <span class="s2">"OTLoG_xxxxxxxx"</span>: <span class="o">{</span>
        <span class="s2">"get"</span>: <span class="nb">true</span>,
        <span class="s2">"post"</span>: <span class="nb">true</span>,
        <span class="s2">"grant"</span>: <span class="nb">true</span>,
        <span class="s2">"put"</span>: <span class="nb">true</span>,
        <span class="s2">"delete"</span>: <span class="nb">true</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p>Login an App user at thethings.iO Platform. Returns the session token and roles. Roles identifies the resources and things that the user has authorized the App to access.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST   https://api.thethings.io/v2/login</code></p>

<h2 id="activate">Activate</h2>

<p>If you didn&rsquo;t activated a thing, go to the <a href="https://developers.thethings.io/index.html#step2">Quickstart guide</a>, and activate at least one.</p>

<h3 id="link-thing">Link Thing</h3>
<pre class="highlight shell"><code>curl -i -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: { {SESSION TOKEN} }"</span> <span class="se">\</span>
  -d <span class="s1">'{"thingToken": "{ {thingToken} }"}'</span> <span class="se">\</span>
  -X POST <span class="s2">"https://api.thethings.io/v2/me/things"</span> -k
</code></pre>

<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"status"</span>: <span class="s2">"success"</span>,
  <span class="s2">"message"</span>: <span class="s2">"created"</span>,
  <span class="s2">"thingId"</span>: <span class="s2">"01234_567890-0abcde_fghi-jklm_nopqrs-tuvxyz"</span>
<span class="o">}</span>
</code></pre>

<p>Before getting the user&rsquo;s data from a thing, it is necessary a procedure called <strong>link thing</strong> which allows the platform to know that the user is the owner of the thing.</p>

<p>This procedure needs a thingToken (or the thingId) and a session token. And it requires some kind of direct communication between the app and the thing. For example, when setting up the wifi for the thing and the ssid and password are sent to the thing, it’s a good moment to ask for the thingToken of the thing. With this thingToken, the App will be able to do the REST call to link the think to the user and store the relation at the platform.
Note that in order to link the thing the user must be logged in and the thing must be activated (i.e. have a thingToken)</p>

<p>This operation can only be done for applications which have been authorized for the thing developer, this kind of apps are called official apps.</p>

<p>For advanced strategies on linking things, check the &lsquo;Link Thing&rsquo; section.</p>

<p><code class="prettyprint">POST   https://api.thethings.io/v2/me/things</code></p>

<h2 id="accessing-the-user-39-s-resources">Accessing the user&rsquo;s resources</h2>

<p>To be able to access the user’s resources (i.e. the things data) the user must have authorized the app to see this resources.</p>

<p>To check which resources has the user available we can call the GET /resources endpoint. Then if we are interested in some of his resources we can ask the user to grant the app permissions to use them. For each resource and thing, there are three types of permissions: get, post and grant. Get and post are equivalent to read and write. Grant allows the app to grant this permission to more users.</p>

<p>When an app asks permissions, the platform sends a confirmation email in background to the user to check if the user is aware of this action. The user must confirm before the application can access the data. There is an exception, <strong>when the app is an official app the permissions are granted automatically.</strong></p>

<h2 id="get-resources">Get resources</h2>
<pre class="highlight shell"><code><span class="c"># curl</span>
curl -i -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: { {SESSION TOKEN} }"</span> <span class="se">\</span>
  -X GET <span class="s2">"https://api.thethings.io/v2/me/resources"</span> -k

</code></pre>

<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># This result tells us that the user has the resource temperature</span>
<span class="c"># for the thing with id "thingId1" and the thing with id "thingId2"</span>
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"name"</span> : <span class="s2">"temperature"</span>,
    <span class="s2">"things"</span> : <span class="o">[</span><span class="s2">"thingId1"</span>, <span class="s2">"thingId2"</span><span class="o">]</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"name"</span>: <span class="s2">"another resource name"</span>,
    <span class="s2">"things"</span> : <span class="o">[</span><span class="s2">"thingId2"</span>, <span class="s2">"thingId3"</span>, ...]
  <span class="o">}</span>,
  ...
<span class="o">]</span>

</code></pre>

<p>Get the user&rsquo;s resources and the things associated to each resource.</p>

<p><code class="prettyprint">GET    https://api.thethings.io/v2/me/resources</code></p>

<h2 id="grant">Grant</h2>
<pre class="highlight shell"><code><span class="c"># curl</span>
curl -i -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: { {SESSION TOKEN} }"</span> <span class="se">\</span>
  -d <span class="s1">'{"permissions": {"temperature":{"thingId1":{"get": true, "grant": true}}}}'</span> <span class="se">\</span>
  -X PUT <span class="s2">"https://api.thethings.io/v2/me/grant"</span> -k
</code></pre>

<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  status: <span class="s1">'success'</span>,
  message: <span class="s1">'granted'</span>
<span class="o">}</span>

</code></pre>

<p>Asks the user to grant permissions to the app, so the app can access the user&rsquo;s resources.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PUT    https://api.thethings.io/v2/me/grant</code></p>

<h2 id="sharing-resources">Sharing resources</h2>
<pre class="highlight shell"><code>curl -i -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: { {SESSION TOKEN} }"</span> <span class="se">\</span>
  -d <span class="s1">'{"email": "friend@email.com", permissions": {"temperature":{"thingId1":{"get": true}}}}'</span> <span class="se">\</span>
  -X PUT <span class="s2">"https://api.thethings.io/v2/me/grant"</span> -k
</code></pre>

<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  status: <span class="s1">'success'</span>,
  message: <span class="s1">'granted'</span>
<span class="o">}</span>

</code></pre>

<p>When a user wants to give access to his or her resources to another user, the app can use the grant endpoint. But this time the app has to pass the email of the granted user. The granter user will also receive an email to confirm this action.</p>

<p>At the next example, we let the user’s friend to read the thingId1’s temperature. She won’t be able to grant this resource to anybody else as we aren’t granting her the grant permission. Also it is not possible to grant permissions that the session-token doesn’t have.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PUT    https://api.thethings.io/v2/me/grant</code></p>

<h2 id="get-resource-values">Get resource values</h2>
<pre class="highlight shell"><code><span class="c"># curl</span>
curl -i -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: { {SESSION TOKEN} }"</span> <span class="se">\</span>
  -X GET <span class="s2">"https://api.thethings.io/v2/me/resources/temperature"</span> -k
</code></pre>

<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"thingId1"</span> : <span class="o">[</span>
    <span class="o">{</span><span class="s2">"value"</span>:15, <span class="s2">"datetime"</span> : <span class="s2">"20150202T220035.00Z"</span><span class="o">}</span>,
    <span class="o">{</span><span class="s2">"value"</span>:17, <span class="s2">"datetime"</span> : <span class="s2">"20150202T210035.00Z"</span><span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre>

<p>This endpoint returns the values of the specified resource.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET    https://api.thethings.io/v2/me/resources/{ {resource} }</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>1</td>
<td>Number</td>
<td>Max. number of values to be returned (Max.: 100)</td>
</tr>
<tr>
<td>startDate</td>
<td>Jan 1st 1970</td>
<td>YYYYMMDDHHmmss</td>
<td>The min date</td>
</tr>
<tr>
<td>endDate</td>
<td>End of times (Javascript)</td>
<td>YYYYMMDDHHmmss</td>
<td>The max date</td>
</tr>
</tbody></table>

<h2 id="get-all-resource-values">Get all resource values</h2>
<pre class="highlight shell"><code><span class="c"># curl</span>

curl -i -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: { {SESSION TOKEN} }"</span> <span class="se">\</span>
  -X GET <span class="s2">"https://api.thethings.io/v2/me/all_resources/{ {thingId} }"</span> -k

</code></pre>

<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">[</span>
    <span class="o">{</span>
        key: <span class="s1">'temperature'</span>,
        values: <span class="o">[</span> <span class="o">{</span> value: 23, datetime: <span class="s1">'2016-03-16T10:29:18.772Z'</span> <span class="o">}</span> <span class="o">]</span>
    <span class="o">}</span>,
    <span class="o">{</span>
        key: <span class="s1">'voltage'</span>,
        values: <span class="o">[</span> <span class="o">{</span> value: 5, datetime: <span class="s1">'2016-03-16T10:29:18.772Z'</span> <span class="o">}</span> <span class="o">]</span>
    <span class="o">}</span>,
    <span class="o">{</span>
        key: <span class="s1">'current'</span>,
        values: <span class="o">[</span> <span class="o">{</span> value: 0.32, datetime: <span class="s1">'2016-03-16T10:29:18.772Z'</span> <span class="o">}</span> <span class="o">]</span>
    <span class="o">}</span>,
    <span class="o">{</span>
        key: <span class="s1">'status'</span>,
        values: <span class="o">[</span> <span class="o">{</span> value: <span class="s1">'ok'</span>, datetime: <span class="s1">'2016-03-16T10:29:18.772Z'</span> <span class="o">}</span> <span class="o">]</span>
    <span class="o">}</span>
<span class="o">]</span>
</code></pre>

<p>This endpoint returns the last(s) values of all the resources.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET    https://api.thethings.io/v2/me/all_resources/{ {thingId} }</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>1</td>
<td>Number</td>
<td>Max. number of values to be returned (Max.: 100)</td>
</tr>
<tr>
<td>startDate</td>
<td>Jan 1st 1970</td>
<td>YYYYMMDDHHmmss</td>
<td>The min date</td>
</tr>
<tr>
<td>endDate</td>
<td>End of times (Javascript)</td>
<td>YYYYMMDDHHmmss</td>
<td>The max date</td>
</tr>
</tbody></table>

<h2 id="subscribe-to-resource-values">Subscribe to resource values</h2>
<pre class="highlight shell"><code>curl -i -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: { {SESSION TOKEN} }"</span> <span class="se">\</span>
  -X GET <span class="s2">"https://api.thethings.io/v2/me/resources/temperature?subscribe=true&amp;keepAlive={ {time_ms} }"</span> -k
</code></pre>

<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"value"</span>:15,
    <span class="s2">"id"</span>: <span class="s2">"thingId1"</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre>

<p>Endpoint to subscribe to the real-time updates. Once subscribed, you&rsquo;ll receive a message each time that the resource receives a new value.</p>

<p>If there are no updates the server will send {} after keepAlive ms. You should also keep a timer, and if you don’t receive updates after keepAlive time isexpired, yo have to resubscribe. This could happen if the wifi is down or something happens to the connection.</p>

<p>To subscribe from a browser we recommend to use <a href="https://developers.thethings.io/app-development-websocket.html">Websocket</a>. REST API subscription is not reliable on browsers.</p>

<p><code class="prettyprint">GET    https://api.thethings.io/v2/me/resources/{ {resource} }?subscribe=true&amp;keepAlive={ {time_ms} }</code></p>

<h2 id="thing-39-s-description">Thing&rsquo;s description</h2>

<p>There’s a special resource called description that can contain meta-data about the thing. This meta-data could be the Thing name (chosen by the user), geocoordinates, JSON objects and any other data the developer want to put there.</p>

<p>This resource is accesible the same way that all the resources. With the get and put resource values.</p>

<p>Before you modify this resource, you have to get the actual description value, change the properties you want to modify and the store the complete document again.</p>

<h3 id="http-requests">HTTP Requests</h3>

<p><code class="prettyprint">GET    https://api.thethings.io/v2/me/resources/description</code></p>

<p><code class="prettyprint">PUT    https ://api.thethings.io/v2/me/resources/description/{ {thingId} }</code></p>

<h2 id="user-39-s-settings">User&rsquo;s settings</h2>

<p>Sometimes the app needs to store additional data about the user (gender, avatar, hair color,&hellip;) in that case the app can use the endpoint &rsquo;/me/settings&rsquo; in order to set and get the user’s settings. The user’s settings are not meant to store large amounts of data. It’s more likely a small key/value store.</p>

<p>Note: If your app needs to store more complex data please look at the section Objects. Storing App data</p>

<h2 id="update-settings">Update settings</h2>
<pre class="highlight shell"><code>curl -i -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: { {SESSION TOKEN} }"</span> <span class="se">\</span>
  -d <span class="s1">'{"hair-color": "pink", "phones": ["13246578","99833212"]}'</span> <span class="se">\</span>
  -X PUT <span class="s2">"https://api.thethings.io/v2/me/settings"</span> -k
</code></pre>

<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  status: <span class="s1">'success'</span>,
  message: <span class="s1">'updated'</span>
<span class="o">}</span>

</code></pre>

<p>Updates the settings key/value object.</p>

<p>There’s a special key: <strong>password</strong> that will update the user’s password with the app.</p>

<h3 id="http-requests">HTTP Requests</h3>

<p><code class="prettyprint">PUT    https://api.thethings.io/v2/me/settings</code></p>

<h2 id="get-settings">Get settings</h2>
<pre class="highlight shell"><code>curl -i -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: { {SESSION TOKEN} }"</span> <span class="se">\</span>
  -X GET <span class="s2">"https://api.thethings.io/v2/me/settings"</span> -k
</code></pre>

<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"hair-color"</span> : <span class="s2">"pink"</span>,
  <span class="s2">"phones"</span> : <span class="o">[</span><span class="s2">"123456"</span>, <span class="s2">"998965"</span><span class="o">]</span>
<span class="o">}</span>
</code></pre>

<p>Retrieve the settings object.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET    https://api.thethings.io/v2/me/settings</code></p>

<h2 id="get-server-date">Get Server Date</h2>
<pre class="highlight shell"><code>curl -i -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: { {SESSION TOKEN} }"</span> <span class="se">\</span>
  -X GET <span class="s2">"https://api.thethings.io/v2/utils/date/?format=UTC"</span> -k
</code></pre>

<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"date"</span>: <span class="s2">"2016-03-15T14:14:09.051Z"</span>,
  <span class="s2">"values"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"2016-03-15T14:14:09.051Z"</span>
    <span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre>

<p>Retrieve the date of the server. The param format accepts two values: &#39;UTC&rsquo; and &#39;unix_timestamp&rsquo;.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET    https ://api.thethings.io/v2/utils/date/?format=UTC</code></p>

<h2 id="objects-storing-app-data">Objects. Storing App data.</h2>

<p>When the application needs to store objects more complex than the key-value settings it can use the endpoint <strong>/classes/</strong>
<em>This endpoint is highly flexible storing 1 - N relationships. And with a few tricks it’s possible to represent more complex relations.</em></p>

<p><em>The endpoint divide in two paths.</em> <strong>/classes/me/ and /classes/app/</strong>. The first one is only accessible by the user who stored the object. The second one allows any app user to retrieve the data. You must add the authorization header with the session token in all the calls. From now on, /me is equivalent to /app</p>

<h2 id="store-an-object">Store an object</h2>
<pre class="highlight shell"><code>curl -i -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: { {SESSION TOKEN} }"</span> <span class="se">\</span>
  -d <span class="s1">'{"_id": "25", "name": "Dubstep"}'</span> <span class="se">\</span>
  -X POST <span class="s2">"https://api.thethings.io/v2/classes/me/Playlists"</span> -k
</code></pre>

<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"status"</span>: <span class="s2">"success"</span>,
  <span class="s2">"message"</span>:<span class="s2">"created"</span>,
  <span class="s2">"id"</span>:<span class="s2">"25"</span>
<span class="o">}</span>
</code></pre>

<p>This endpoint lets you store an object as a JSON string. If you don’t specify an _id, the system will automatically assign a random id. Returns error if the _id already exists for that collection.</p>

<p><code class="prettyprint">POST   https://api.thethings.io/v2/classes/me/{ {idCollection} }</code></p>

<p>You can set the _id at the path, too.</p>

<p><code class="prettyprint">POST   https://api.thethings.io/v2/classes/me/{ {idCollection} }/{ {primaryKey} }</code></p>

<h2 id="delete-an-object">Delete an object</h2>
<pre class="highlight shell"><code>curl -i -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: { {SESSION TOKEN} }"</span> <span class="se">\</span>
  -X DELETE <span class="s2">"https://api.thethings.io/v2/classes/me/Playlists/25"</span> -k
</code></pre>

<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"status"</span>: <span class="s2">"success"</span>,
  <span class="s2">"message"</span>: <span class="s2">"deleted"</span>
<span class="o">}</span>
</code></pre>

<p>Delete an object by _id.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE     https://api.thethings.io/v2/classes/me/{ {idCollection} }/{ {primaryKey} }</code></p>

<h2 id="update-an-object">Update an object</h2>
<pre class="highlight shell"><code>curl -i -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: { {SESSION TOKEN} }"</span> <span class="se">\</span>
  -d <span class="s1">'{"name": "Dubstep Mix", "duration": 180}'</span> <span class="se">\</span>
  -X PUT <span class="s2">"https://api.thethings.io/v2/classes/me/Playlists/25"</span> -k
</code></pre>

<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  status: <span class="s1">'success'</span>,
  message: <span class="s1">'updated'</span>
<span class="o">}</span>
</code></pre>

<p>Change the values from an object. If there are some values which are not overwritten, this values won’t be deleted.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PUT    https://api.thethings.io/v2/classes/me/{ {idCollection} }/{ {primaryKey} }</code></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
