<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>thethings.iO API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;,&quot;shell&quot;,&quot;ruby&quot;,&quot;python&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
        <div class="lang-selector">
              <a href="#" data-language-name="json">Sample Payload / Sample Response</a>
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/theThings/thethings.iO-arduino-library'>Arduino library</a></br></li>
            <li><a href='https://github.com/theThings/thethings.iO-python-library'>Python library</a></br></li>
            <li><a href='https://github.com/theThings/thethings.iO-TexasInstruments-library'>Texas Instruments library</a></br></br> <a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>theThings.iO platform provides a complete backend solution for IoT Markers and IoT App Developers through an easy and flexible API. theThings.iO is hardware agnostic, that means that we don&rsquo;t force you to use a specific hardware, provided that is capable to use any of our supported protocols: HTTP, Websockets, MQTT or CoAP.</p>

<h1 id="things-coap">things - CoAP</h1>

<h2 id="basics-of-coap">Basics of CoAP</h2>

<p>As <a href="http://en.wikipedia.org/wiki/Constrained_Application_Protocol">Wikipedia</a> says: &lsquo;Constrained Application Protocol (CoAP) is a software protocol intended to be used in very simple electronics devices that allows them to communicate interactively over the Internet.&rsquo;&hellip;&rsquo; CoAP is designed to easily translate to HTTP for simplified integration with the web.&rsquo;</p>

<p>In this page you will learn how to use theThings.IO CoAP endpoint.</p>

<h2 id="getting-started">Getting Started</h2>

<p>The CoAP endpoints are very similar to the REST API. There are the same methods (Activate, ThingWrite ThingRead and ThingSubscribe) and also the paths are the same. The only difference is the endpoint base url and protocol: coap.thethings.io (port 5683)</p>

<h3 id="get-tokens">Get tokens</h3>

<p>To be able to follow the examples you will need an activation code or a thing token.</p>

<p>An activation code is a unique code that will enable your devices to be activated via the registration endpoint call. The purpose of this code is at the same time identify you as the creator of the thing and when some day you start selling your awesome IoT product, avoid that somebody can activate things in your name. As a result of this call your thing will receive a unique thing token that will identify your thing at thethings.iO platform.
You can also activate your things manually at the Panel as explained on the getting started guide.</p>

<p>If you are in the developers tier you will get some activation codes for free. If you are in the premium tier you will be able to generate as many activation codes as you need. To get your tokens go to the <a href="https://panel.thethings.io/#/things-manager/">things manager</a> page and click the get activation codes button.</p>

<h3 id="coap-test">CoAP Test</h3>

<p>To test your connectivity with coap.thethings.io you have two options:</p>

<ul>
<li>Use the coap-cli example from <a href="http://sourceforge.net/projects/libcoap/">libcoap</a></li>
<li>Use the <a href="https://addons.mozilla.org/ca/firefox/addon/copper-270430/">Firefox plugin Copper</a>. Set the block size to late negotiation or 1024 in the behavior tab.</li>
</ul>

<h2 id="activate-todo-add-command-line-example-sample-response-payload">Activate  TODO: add command line example, sample response, payload</h2>

<blockquote>
<p>Sample Payload</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"activationCode"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"{ {activation Code} }"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Everything has gone well:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"thingToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NwFbEqwEQ-ucyW8aET34EWi6L_tte6fumxTSU-Pkw"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Error:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Error creating thing"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Activates a thing with an activation code. The result is a thing token. You will be able to retrieve this thing token at any time from the <a href="http://panel.thethings.io/#/things-manager">panel</a></p>

<h3 id="coap-request">CoAP Request</h3>

<p><code class="prettyprint">POST   coap://coap.thethings.io/v2/things/</code></p>

<h2 id="write-todo-add-command-line-example-sample-response-payload">Write TODO: add command line example, sample response, payload</h2>

<blockquote>
<p>Sample Payload</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"values"</span><span class="p">:</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fun"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9000"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Everything has gone well
<code class="prettyprint">json
{
  &quot;status&quot;: &quot;Success&quot;,
  &quot;message&quot;: &quot;Created&quot;
}
</code></p>
</blockquote>

<h3 id="coap-request">CoAP Request</h3>

<p><code class="prettyprint">POST   coap://coap.thethings.io/v2/things/THING_TOKEN</code></p>

<h2 id="read-todo-add-command-line-example-sample-response-payload">Read TODO: add command line example, sample response, payload</h2>

<p>This method returns the values of the specified KEY from the corresponding thing THING_TOKEN.</p>

<h3 id="coap-request">CoAP Request</h3>

<p><code class="prettyprint">GET    coap://coap.thethings.io/v2/things/THING_TOKEN/resources/KEY</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>1</td>
<td>Number</td>
<td>Max. number of values to be returned (Max.: 100)</td>
</tr>
<tr>
<td>startDate</td>
<td>Jan 1st 1970</td>
<td>YYYYMMDDHHmmss</td>
<td>The min date</td>
</tr>
<tr>
<td>endDate</td>
<td>End of times (Javascript)</td>
<td>YYYYMMDDHHmmss</td>
<td>The max date</td>
</tr>
</tbody></table>

<h2 id="subscribe-todo-add-command-line-example-sample-response-payload">Subscribe  TODO: add command line example, sample response, payload</h2>

<p>This method subscribes to the thing channel and gets realtime updates. You must set the CoAP observe bit.</p>

<h3 id="coap-request">CoAP Request</h3>

<p><code class="prettyprint">GET coap://coap.thethings.io/v2/things/THING_TOKEN</code></p>

<p>Writes the records of data from the thing corresponding to the specified THINGTOKEN. Only alphanumeric characters and &ldquo;.&rdquo;, &ldquo;-&rdquo;, &ldquo;&rdquo; simbols are admited for the resource name &ldquo;key&rdquo;.</p>

<h3 id="coap-request">CoAP Request</h3>

<p><code class="prettyprint">POST   coap://coap.thethings.io/v2/things/THING_TOKEN</code></p>

<h2 id="read-todo-add-command-line-example-sample-response-payload">Read TODO: add command line example, sample response, payload</h2>

<p>This method returns the values of the specified KEY from the corresponding thing THING_TOKEN.</p>

<h3 id="coap-request">CoAP Request</h3>

<p><code class="prettyprint">GET    coap://coap.thethings.io/v2/things/THING_TOKEN/resources/KEY</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>1</td>
<td>Number</td>
<td>Max. number of values to be returned (Max.: 100)</td>
</tr>
<tr>
<td>startDate</td>
<td>Jan 1st 1970</td>
<td>YYYYMMDDHHmmss</td>
<td>The min date</td>
</tr>
<tr>
<td>endDate</td>
<td>End of times (Javascript)</td>
<td>YYYYMMDDHHmmss</td>
<td>The max date</td>
</tr>
</tbody></table>

<h2 id="subscribe-todo-add-command-line-example-sample-response-payload">Subscribe  TODO: add command line example, sample response, payload</h2>

<p>This method subscribes to the thing channel and gets realtime updates. You must set the CoAP observe bit.</p>

<h3 id="coap-request">CoAP Request</h3>

<p><code class="prettyprint">GET coap://coap.thethings.io/v2/things/THING_TOKEN</code></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">Sample Payload / Sample Response</a>
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
